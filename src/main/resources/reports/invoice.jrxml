<?xml version="1.0" encoding="UTF-8"?>
<jasperReport xmlns="http://jasperreports.sourceforge.net/jasperreports"
              xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
              xsi:schemaLocation="http://jasperreports.sourceforge.net/jasperreports
              http://jasperreports.sourceforge.net/xsd/jasperreport.xsd"
              name="invoice" pageWidth="595" pageHeight="842"
              columnWidth="555" leftMargin="20" rightMargin="20"
              topMargin="20" bottomMargin="20">

    <property name="com.jaspersoft.studio.data.defaultdataadapter" value="One Empty Record"/>

    <!-- Parameters -->
    <parameter name="ORDER_NUMBER" class="java.lang.String"/>
    <parameter name="ORDER_DATE" class="java.lang.String"/>
    <parameter name="CUSTOMER_NAME" class="java.lang.String"/>
    <parameter name="CUSTOMER_EMAIL" class="java.lang.String"/>
    <parameter name="CUSTOMER_PHONE" class="java.lang.String"/>
    <parameter name="SHIPPING_ADDRESS" class="java.lang.String"/>
    <parameter name="BILLING_ADDRESS" class="java.lang.String"/>
    <parameter name="PAYMENT_METHOD" class="java.lang.String"/>
    <parameter name="PAYMENT_STATUS" class="java.lang.String"/>
    <parameter name="SUBTOTAL" class="java.lang.Double"/>
    <parameter name="SHIPPING_COST" class="java.lang.Double"/>
    <parameter name="TAX_AMOUNT" class="java.lang.Double"/>
    <parameter name="DISCOUNT_AMOUNT" class="java.lang.Double"/>
    <parameter name="TOTAL_AMOUNT" class="java.lang.Double"/>

    <queryString>
        <![CDATA[]]>
    </queryString>

    <!-- Fields for the data source - these must match the Map keys in createDataSource -->
    <field name="productName" class="java.lang.String"/>
    <field name="quantity" class="java.lang.Integer"/>
    <field name="price" class="java.lang.Double"/>
    <field name="total" class="java.lang.Double"/>

    <title>
        <band height="100">
            <rectangle>
                <reportElement x="0" y="0" width="555" height="80" backcolor="#2C3E50"/>
            </rectangle>
            <textField>
                <reportElement x="0" y="20" width="555" height="30"/>
                <textElement textAlignment="Center">
                    <font size="24" isBold="true" pdfFontName="Helvetica-Bold"/>
                </textElement>
                <textFieldExpression><![CDATA["ASHTANA"]]></textFieldExpression>
            </textField>
            <textField>
                <reportElement x="0" y="50" width="555" height="20"/>
                <textElement textAlignment="Center">
                    <font size="14" isBold="true" pdfFontName="Helvetica-Bold"/>
                </textElement>
                <textFieldExpression><![CDATA["INVOICE"]]></textFieldExpression>
            </textField>
        </band>
    </title>

    <pageHeader>
        <band height="120">
            <textField>
                <reportElement x="0" y="0" width="100" height="20"/>
                <textElement>
                    <font size="10" isBold="true"/>
                </textElement>
                <textFieldExpression><![CDATA["Order Number:"]]></textFieldExpression>
            </textField>
            <textField>
                <reportElement x="100" y="0" width="200" height="20"/>
                <textElement>
                    <font size="10"/>
                </textElement>
                <textFieldExpression><![CDATA[$P{ORDER_NUMBER}]]></textFieldExpression>
            </textField>

            <textField>
                <reportElement x="0" y="20" width="100" height="20"/>
                <textElement>
                    <font size="10" isBold="true"/>
                </textElement>
                <textFieldExpression><![CDATA["Order Date:"]]></textFieldExpression>
            </textField>
            <textField>
                <reportElement x="100" y="20" width="200" height="20"/>
                <textElement>
                    <font size="10"/>
                </textElement>
                <textFieldExpression><![CDATA[$P{ORDER_DATE}]]></textFieldExpression>
            </textField>

            <textField>
                <reportElement x="0" y="40" width="100" height="20"/>
                <textElement>
                    <font size="10" isBold="true"/>
                </textElement>
                <textFieldExpression><![CDATA["Customer:"]]></textFieldExpression>
            </textField>
            <textField>
                <reportElement x="100" y="40" width="200" height="20"/>
                <textElement>
                    <font size="10"/>
                </textElement>
                <textFieldExpression><![CDATA[$P{CUSTOMER_NAME}]]></textFieldExpression>
            </textField>

            <textField>
                <reportElement x="0" y="60" width="100" height="20"/>
                <textElement>
                    <font size="10" isBold="true"/>
                </textElement>
                <textFieldExpression><![CDATA["Payment:"]]></textFieldExpression>
            </textField>
            <textField>
                <reportElement x="100" y="60" width="200" height="20"/>
                <textElement>
                    <font size="10"/>
                </textElement>
                <textFieldExpression><![CDATA[$P{PAYMENT_METHOD}]]></textFieldExpression>
            </textField>
        </band>
    </pageHeader>

    <columnHeader>
        <band height="30">
            <rectangle>
                <reportElement x="0" y="0" width="555" height="30" backcolor="#F8F9FA"/>
            </rectangle>
            <staticText>
                <reportElement x="0" y="0" width="300" height="30"/>
                <textElement verticalAlignment="Middle">
                    <font size="10" isBold="true"/>
                </textElement>
                <text><![CDATA[Product Name]]></text>
            </staticText>
            <staticText>
                <reportElement x="300" y="0" width="80" height="30"/>
                <textElement textAlignment="Center" verticalAlignment="Middle">
                    <font size="10" isBold="true"/>
                </textElement>
                <text><![CDATA[Quantity]]></text>
            </staticText>
            <staticText>
                <reportElement x="380" y="0" width="85" height="30"/>
                <textElement textAlignment="Right" verticalAlignment="Middle">
                    <font size="10" isBold="true"/>
                </textElement>
                <text><![CDATA[Unit Price]]></text>
            </staticText>
            <staticText>
                <reportElement x="465" y="0" width="90" height="30"/>
                <textElement textAlignment="Right" verticalAlignment="Middle">
                    <font size="10" isBold="true"/>
                </textElement>
                <text><![CDATA[Total]]></text>
            </staticText>
        </band>
    </columnHeader>

    <detail>
        <band height="25">
            <textField isStretchWithOverflow="true">
                <reportElement x="0" y="0" width="300" height="25"/>
                <textElement verticalAlignment="Middle">
                    <font size="9"/>
                </textElement>
                <!-- CORRECTED: Direct field reference -->
                <textFieldExpression><![CDATA[$F{productName}]]></textFieldExpression>
            </textField>
            <textField>
                <reportElement x="300" y="0" width="80" height="25"/>
                <textElement textAlignment="Center" verticalAlignment="Middle">
                    <font size="9"/>
                </textElement>
                <!-- CORRECTED: Direct field reference -->
                <textFieldExpression><![CDATA[$F{quantity}]]></textFieldExpression>
            </textField>
            <textField>
                <reportElement x="380" y="0" width="85" height="25"/>
                <textElement textAlignment="Right" verticalAlignment="Middle">
                    <font size="9"/>
                </textElement>
                <!-- CORRECTED: Direct field reference -->
                <textFieldExpression><![CDATA["$" + $F{price}]]></textFieldExpression>
            </textField>
            <textField>
                <reportElement x="465" y="0" width="90" height="25"/>
                <textElement textAlignment="Right" verticalAlignment="Middle">
                    <font size="9"/>
                </textElement>
                <!-- CORRECTED: Direct field reference -->
                <textFieldExpression><![CDATA["$" + $F{total}]]></textFieldExpression>
            </textField>
        </band>
    </detail>

    <summary>
        <band height="150">
            <textField>
                <reportElement x="355" y="20" width="100" height="20"/>
                <textElement textAlignment="Right">
                    <font size="10" isBold="true"/>
                </textElement>
                <textFieldExpression><![CDATA["Subtotal:"]]></textFieldExpression>
            </textField>
            <textField>
                <reportElement x="455" y="20" width="100" height="20"/>
                <textElement textAlignment="Right">
                    <font size="10"/>
                </textElement>
                <textFieldExpression><![CDATA["$" + $P{SUBTOTAL}]]></textFieldExpression>
            </textField>

            <textField>
                <reportElement x="355" y="40" width="100" height="20"/>
                <textElement textAlignment="Right">
                    <font size="10" isBold="true"/>
                </textElement>
                <textFieldExpression><![CDATA["Shipping:"]]></textFieldExpression>
            </textField>
            <textField>
                <reportElement x="455" y="40" width="100" height="20"/>
                <textElement textAlignment="Right">
                    <font size="10"/>
                </textElement>
                <textFieldExpression><![CDATA[$P{SHIPPING_COST} == 0 ? "FREE" : ("$" + $P{SHIPPING_COST})]]></textFieldExpression>
            </textField>

            <textField>
                <reportElement x="355" y="60" width="100" height="20"/>
                <textElement textAlignment="Right">
                    <font size="10" isBold="true"/>
                </textElement>
                <textFieldExpression><![CDATA["Tax:"]]></textFieldExpression>
            </textField>
            <textField>
                <reportElement x="455" y="60" width="100" height="20"/>
                <textElement textAlignment="Right">
                    <font size="10"/>
                </textElement>
                <textFieldExpression><![CDATA["$" + $P{TAX_AMOUNT}]]></textFieldExpression>
            </textField>

            <textField>
                <reportElement x="355" y="80" width="100" height="20"/>
                <textElement textAlignment="Right">
                    <font size="10" isBold="true"/>
                </textElement>
                <textFieldExpression><![CDATA["Discount:"]]></textFieldExpression>
            </textField>
            <textField>
                <reportElement x="455" y="80" width="100" height="20"/>
                <textElement textAlignment="Right">
                    <font size="10"/>
                </textElement>
                <textFieldExpression><![CDATA[$P{DISCOUNT_AMOUNT} > 0 ? ("-$" + $P{DISCOUNT_AMOUNT}) : "$0.00"]]></textFieldExpression>
            </textField>

            <line>
                <reportElement x="355" y="105" width="200" height="1"/>
            </line>

            <textField>
                <reportElement x="355" y="110" width="100" height="25"/>
                <textElement textAlignment="Right">
                    <font size="12" isBold="true"/>
                </textElement>
                <textFieldExpression><![CDATA["Total:"]]></textFieldExpression>
            </textField>
            <textField>
                <reportElement x="455" y="110" width="100" height="25"/>
                <textElement textAlignment="Right">
                    <font size="12" isBold="true"/>
                </textElement>
                <textFieldExpression><![CDATA["$" + $P{TOTAL_AMOUNT}]]></textFieldExpression>
            </textField>

            <textField>
                <reportElement x="0" y="140" width="555" height="10"/>
                <textElement textAlignment="Center">
                    <font size="8"/>
                </textElement>
                <textFieldExpression><![CDATA["Thank you for your business!"]]></textFieldExpression>
            </textField>
        </band>
    </summary>
</jasperReport>